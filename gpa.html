<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì GPA ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏£‡∏î‡πÉ‡∏ô‡∏ù‡∏±‡∏ô</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Prompt&display=swap');

    body {
      font-family: 'Prompt', sans-serif;
      background-color: #f4f7f9;
      color: #2c3e50;
      padding: 20px;
      max-width: 900px;
      margin: auto;
      line-height: 1.6;
    }

    h1 {
      text-align: center;
      color: #34495e;
      margin-bottom: 30px;
      font-weight: 700;
    }
    h2 {
      color: #34495e;
      margin-top: 30px;
      margin-bottom: 15px;
      font-weight: 500;
      border-bottom: 2px solid #2980b9;
      padding-bottom: 5px;
    }
    h3 {
      color: #34495e;
      margin-top: 10px;
      font-weight: 500;
    }

    .box {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border: 1px solid #d1d8e0;
    }

    label {
      display: block;
      font-weight: 500;
      margin-bottom: 6px;
      margin-top: 15px;
      color: #34495e;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      font-size: 18px;
      height: 44px;
      line-height: 44px;
      padding: 0 12px;
      border: 1.5px solid #bdc3c7;
      border-radius: 6px;
      color: #2c3e50;
      transition: border-color 0.3s;
      box-sizing: border-box;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #2980b9;
      box-shadow: 0 0 6px rgba(41, 128, 185, 0.4);
    }

    button {
      background-color: #2980b9;
      color: white;
      border: none;
      padding: 14px 25px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
      transition: background-color 0.3s;
      width: 100%;
      max-width: 300px;
      display: block;
      margin-left: auto;
      margin-right: auto;
      font-weight: 700;
      box-shadow: 0 4px 8px rgba(41, 128, 185, 0.3);
    }

    button:hover {
      background-color: #1f6391;
    }

    .success {
      background-color: #dff0d8;
      border-left: 5px solid #27ae60;
      color: #2c662d;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .warning {
      background-color: #fcf8e3;
      border-left: 5px solid #f39c12;
      color: #8a6d3b;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    @media (max-width: 600px) {
      body {
        padding: 15px 10px;
      }
      button {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>

  <div class="box">
    <h1>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏Å‡∏£‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (GPA) </h1>

    <label for="targetGPA">‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (GPA):</label>
    <input type="number" id="targetGPA" step="0.5" min="0" max="4" placeholder="‡πÄ‡∏ä‡πà‡∏ô 3.0" />

    <label for="midFull">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ:</label>
    <input type="number" id="midFull" value="50" min="1" />

    <label for="finalFull">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏Ç‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ:</label>
    <input type="number" id="finalFull" value="50" min="1" />
  </div>

  <div id="subjects"></div>

  <button onclick="addSubject()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤</button>

  <button onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>

  <div id="results"></div>

<script>
  let subjectCount = 0;

  const gradeScale = [
    { grade: 4.0, min: 80 },
    { grade: 3.5, min: 75 },
    { grade: 3.0, min: 70 },
    { grade: 2.5, min: 65 },
    { grade: 2.0, min: 60 },
    { grade: 1.5, min: 55 },
    { grade: 1.0, min: 50 },
    { grade: 0.0, min: 0 }
  ];

  function addSubject() {
    subjectCount++;
    const container = document.createElement('div');
    container.className = 'box';
    container.innerHTML = `
      <h3>‡∏ß‡∏¥‡∏ä‡∏≤ ${subjectCount}</h3>
      <label for="name${subjectCount}">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤:</label>
      <input type="text" id="name${subjectCount}" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">

      <label for="credit${subjectCount}">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï:</label>
      <input type="number" id="credit${subjectCount}" min="0" step="0.5" placeholder="‡πÄ‡∏ä‡πà‡∏ô 3">

      <label for="inputType${subjectCount}">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ:</label>
      <select id="inputType${subjectCount}" onchange="toggleInput(${subjectCount})">
        <option value="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏°)</option>
        <option value="gpa">GPA (0 - 4)</option>
      </select>

      <div id="scoreInput${subjectCount}">
        <label for="midScore${subjectCount}">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ:</label>
        <input type="number" id="midScore${subjectCount}" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 40">
      </div>

      <div id="gpaInput${subjectCount}" style="display:none;">
        <label for="midGPA${subjectCount}">GPA ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ:</label>
        <input type="number" id="midGPA${subjectCount}" min="0" max="4" step="0.5" placeholder="‡πÄ‡∏ä‡πà‡∏ô 3.5">
      </div>
    `;
    document.getElementById('subjects').appendChild(container);
  }

  function toggleInput(id) {
    const type = document.getElementById(`inputType${id}`).value;
    document.getElementById(`scoreInput${id}`).style.display = type === "score" ? "block" : "none";
    document.getElementById(`gpaInput${id}`).style.display = type === "gpa" ? "block" : "none";
  }

  function gpaToScore(gpa) {
    const found = gradeScale.find(g => g.grade === gpa);
    return found ? found.min : null;
  }

  function calculate() {
    const targetGPA = parseFloat(document.getElementById("targetGPA").value);
    const midFull = parseFloat(document.getElementById("midFull").value);
    const finalFull = parseFloat(document.getElementById("finalFull").value);

    if (isNaN(targetGPA) || isNaN(midFull) || isNaN(finalFull)) {
      alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
      return;
    }

    const targetScore = gpaToScore(targetGPA);
    if (targetScore === null) {
      alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 0 - 4 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô");
      return;
    }

    let totalCredits = 0;
    let totalGradePoints = 0;
    let resultHTML = "<h2>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</h2>";

    for (let i = 1; i <= subjectCount; i++) {
      const name = document.getElementById(`name${i}`)?.value.trim() || `‡∏ß‡∏¥‡∏ä‡∏≤ ${i}`;
      const credit = parseFloat(document.getElementById(`credit${i}`)?.value);

      if (isNaN(credit)) {
        resultHTML += `<p>‚ùå ‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô "${name}"</p>`;
        continue;
      }

      const inputType = document.getElementById(`inputType${i}`).value;
      let midScore = 0;

      if (inputType === "score") {
        midScore = parseFloat(document.getElementById(`midScore${i}`).value);
      } else {
        const midGPA = parseFloat(document.getElementById(`midGPA${i}`).value);
        midScore = gpaToScore(midGPA) * (midFull / 100);
      }

      if (isNaN(midScore)) {
        resultHTML += `<p>‚ùå ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô "${name}"</p>`;
        continue;
      }

      const requiredFinal = targetScore - midScore;

      if (requiredFinal > finalFull) {
        const fallback = gradeScale.slice().reverse().find(g => (g.min - midScore) <= finalFull) || gradeScale[gradeScale.length -1];
        const fallbackScore = fallback.min - midScore;

        resultHTML += `
          <div class="box warning">
            <p><strong>${name}</strong> (${credit} ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï)</p>
            <p>‚ö†Ô∏è ‡πÄ‡∏Å‡∏£‡∏î <strong>${targetGPA.toFixed(1)}</strong> ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏ô‡πâ‡∏≤ üò¢</p>
            <p>üëâ ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡∏£‡∏î <strong>${fallback.grade.toFixed(1)}</strong> ‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏õ‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 
            <strong>${fallbackScore.toFixed(2)}</strong> / ${finalFull} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
          </div>
        `;
        totalGradePoints += fallback.grade * credit;
      } else {
        resultHTML += `
          <div class="box success">
            <p><strong>${name}</strong> (${credit} ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï)</p>
            <p>‚úÖ ‡πÄ‡∏Å‡∏£‡∏î <strong>${targetGPA.toFixed(1)}</strong> ‡∏°‡∏≤‡πÅ‡∏ô‡πà! üéâ</p>
            <p>üëâ ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏õ‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ <strong>${requiredFinal.toFixed(2)}</strong> / ${finalFull} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
          </div>
        `;
        totalGradePoints += targetGPA * credit;
      }

      totalCredits += credit;
    }

    if (totalCredits > 0 && subjectCount > 1) {
      const gpa = totalGradePoints / totalCredits;
      resultHTML += `<h3>üéì ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ: <strong>${gpa.toFixed(2)}</strong></h3>`;
    }

    document.getElementById("results").innerHTML = resultHTML;
  }
</script>

</body>
</html>
